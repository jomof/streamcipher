name: tests

on:
 push:
   branches: [ main ]


jobs:
 test:
   runs-on: ubuntu-latest

   steps:
   - name: Checkout code
     uses: actions/checkout@v2

   - name: Setup Icarus Verilog
     run: |
       sudo apt-get update
       sudo apt-get install -y iverilog

   - name: Compile and run testbench
     run: |
       iverilog -g2012 -o compiled_test_bench src/stream_cipher.sv
       vvp compiled_test_bench
